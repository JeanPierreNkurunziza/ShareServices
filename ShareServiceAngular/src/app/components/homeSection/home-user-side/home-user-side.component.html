<div class="list row">
    <div class="col-md-4">
      
    </div>
    <div class="col-md-6">
      <div class="input-group mb-3">
        <ul style="text-align:left ;" class="list-group" *ngFor="let user of users ; let i = index ">
            <li class="list-group-item" 
             [class.active]="i == currentIndex"
              (click)="setActiveUser(user, i)"  *ngIf="username==user.username">
               {{ user.username }} <strong>Click here for details </strong>
            </li>
          </ul>
      </div>
    </div>
    <!-- ***************************************************************** -->
   
    <div class="col-md-11">
      <section class="h-100 h-custom" style="background-color: #8fc4b7;">
        <div class="container py-5 h-100">
          <div class="row d-flex justify-content-center align-items-center h-100">
            <div class="col-lg-12 col-xl-10">
              <div class="card rounded-3">
                <img src="https://mdbcdn.b-cdn.net/img/Photos/new-templates/bootstrap-registration/img3.webp"
                  class="w-100" style="border-top-left-radius: .3rem; border-top-right-radius: .3rem;"
                  alt="Sample photo">
                <div class="card-body p-4 p-md-5" >
                  <h3 class="mb-4 pb-2 pb-md-0 mb-md-5 px-md-2">Personal Details</h3> 
                      <div *ngIf="currentUser.id">
                        <div class="card mb-3" style="max-width: 540px;" *ngFor="let service of currentUser.Services">
                          <div class="row no-gutters" *ngFor="let item of service.ServiceDemandes">
                            <div class="col-md-4">
                            
                              <div class="card-img" >
                                <img [src]="currentUser.image | image" height="200px" width="200px"> 
                              </div>  
                            </div>
                            <div class="col-md-8" style="background-color: rgb(175, 209, 203);">
                              <div class="card-body">
                                <div class="card-text"> <label><strong>Username:</strong></label>  {{ currentUser.username }} </div>
                                <div class="card-text"> <label><strong>Email:</strong></label> {{ currentUser.email }} </div>     
                                <div class="card-text" style="display:none ;"> <label><strong>Password:</strong></label> {{ currentUser.password }} </div>
                               
                              </div>
                            </div>
                            <div class="col-md-4" >
                              <div class="card-img" >
                                <img [src]="service.image | image" height="200px" width="200px"> 
                              </div>
                            </div>
                            <div class="col-md-8" style="background-color:rgb(204, 204, 236) ;">
                              <div *ngIf="service.id">
                                <p> <label><strong>Service Provider:</strong></label> {{item.Member?.name}} - (code) : <strong>{{item.Member?.id}}</strong> </p>
                              <!-- ************* pour ajouter les details competence******************* -->
                                 <div class="form-group" *ngIf="isShownDetails" > 
                                
                                  <!-- *********************************************** -->
                                  <form [formGroup]="FormServiceDemande" (ngSubmit)="AddServiceDetails()">
                                   <div>
                                          <label for="name"  style="color:blue ;">CodeService</label> <br/>
                                          <input type="text" formControlName="id" ngModel="{{item?.id}}" style="width:50px ;" />
                                  </div>
                                  <div>
                                    <label for="name"  style="color:blue ;">CodeService</label> <br/>
                                    <input type="text" formControlName="ServiceId" ngModel="{{service.id}}" style="width:50px ;" />
                                  </div>
                                  <div>
                                       <label for="name"  style="color:blue ;">CodeMember</label> <br/>
                                       <input type="text" formControlName="MemberId" ngModel="{{item.Member?.id}}" style="width:50px ;" />
                                  </div>
                                  
                                  <div >
                                       <label for="name"  style="color:blue ;">Choose Date service</label> <br/> 
                                      <input type="datetime-local" formControlName="jourHeurePropose" style="float:left ; margin-right: 3%;" />
                                      <span *ngIf="FormServiceDemande.controls['jourHeurePropose'].invalid && !FormServiceDemande.controls['jourHeurePropose'].errors" style="color : red">
                                          Date Time is required
                                      </span>
                                  </div>
                                  
                                  <button  class="btn btn-primary btn-sm" type="submit" [disabled]="FormServiceDemande.invalid">Valider</button>
                                </form>
                                <!-- *********************************************** -->
                                </div>

                                <!-- ****************** end of the details forms ********************************* -->
                              </div>  
                              <label><strong>Service Proposed: <a class="badge badge-warning" (click)="toggleShowDetails()" > Propose Date </a></strong></label>
                                    <ul> 
                                      <li> {{ service.service }}  </li>
                                      <li> {{ service.description }}  </li> 
                                      <li>Proposed date:  {{ item.jourHeurePropose }}  </li>
                                    </ul>
                            </div>
                            <div class="col-md-4" >
                              <div class="card-img" >
                                <img [src]="item.Member?.image | image" height="200px" width="200px"> 
                              </div>
                            </div>
                            <div class="col-md-8" style="background-color: #c0ddd6 ;">
                                  <label><strong>The person contacted:</strong></label>
                                    <div *ngIf="item.Member">
                                      <ul> <li>Service Provider : {{ item.Member.name }} {{ item.Member.surname }} </li>
                                        <li> {{ item.Member.email }}  </li>
                                        <li> {{ item.Member.phone }}  </li>
                                        <li> {{ item.Member.rue }} {{ item.Member.numero}} </li>
                                      </ul>
                                    </div>
                            </div>
                          </div>
                        </div>

                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </section>
      <div *ngIf="!currentUser"> <br /> <p>Please click on a User...</p> </div>
    </div>
    <!-- ******************************************************************* -->
  </div>
  


